#in case the task requeries python to be installed:
#FROM python:3.9-slim-buster
#else if its just a system : 
FROM debian:latest

# Install some libs
RUN apt-get update && apt-get -y upgrade


# create ctf-user
RUN groupadd -r ctf && useradd -r -g ctf ctf
COPY main /home/ctf/
COPY launch.sh /home/ctf/
COPY ynetd /home/ctf/
COPY flag /home/ctf/flag
COPY ld-linux-x86-64.so.2 /home/ctf/
COPY libc.so.6 /home/ctf/
#set some proper permissions


RUN chown -R root:ctf /home/ctf
RUN chmod 750 /home/ctf/ynetd
RUN chmod 750 /home/ctf/launch.sh
RUN chmod 754 /home/ctf/flag
RUN chmod 750 /home/ctf/main
RUN chmod 750 /home/ctf/ld-linux-x86-64.so.2
RUN chmod 750 /home/ctf/libc.so.6

#rwx 421 
USER ctf
EXPOSE 5002

#CMD /home/ctf/ynetd -p 7500 /home/ctf/launch.sh
